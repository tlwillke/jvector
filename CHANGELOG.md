### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### 4.0.0-beta.9

- Fix issue when calling cleanup while concurrently executing searches [`#483`](https://github.com/tlwillke/jvector/pull/483)
- Improve the efficiency and memory usage of GraphIndexBuilder.cleanup [`#477`](https://github.com/tlwillke/jvector/pull/477)
- add PQ training benchmark [`#482`](https://github.com/tlwillke/jvector/pull/482)
- Remove extraneous character from datasets.yml [`#484`](https://github.com/tlwillke/jvector/pull/484)
- Upgrade YAML files to v5 after the format was introduced in the last update [`#478`](https://github.com/tlwillke/jvector/pull/478)
- Add a new graph node using a search score [`#473`](https://github.com/tlwillke/jvector/pull/473)
- chore(release): Bump tag version and update changelog [`#471`](https://github.com/tlwillke/jvector/pull/471)
- Bench improvements with YAML config files [`#462`](https://github.com/tlwillke/jvector/pull/462)
- avx512 test runners, jobs, and assertions [`#469`](https://github.com/tlwillke/jvector/pull/469)
- Find insertion point before performing copy in ConcurrentNeighborMap [`#468`](https://github.com/tlwillke/jvector/pull/468)
- Factorize the computation of diverse edges [`#466`](https://github.com/tlwillke/jvector/pull/466)
- Random vector index build jmh + setup scripts [`#424`](https://github.com/tlwillke/jvector/pull/424)
- Better control over setting string formats for the benchmark metrics [`#461`](https://github.com/tlwillke/jvector/pull/461)
- Check values of clusterCount in PQ [`#464`](https://github.com/tlwillke/jvector/pull/464)
- Perf metrics improvement v1.1 [`#460`](https://github.com/tlwillke/jvector/pull/460)
- Simplify OnDiskGraphIndex.View to avoid code duplication [`#458`](https://github.com/tlwillke/jvector/pull/458)
- Improve perf metrics measurement and summarization [`#459`](https://github.com/tlwillke/jvector/pull/459)
- Creating starting point for changelog tracking. [`#456`](https://github.com/tlwillke/jvector/pull/456)
- chore(release) adjust changelog generation steps [`#437`](https://github.com/tlwillke/jvector/pull/437)
- Workflow/tag release update [`#452`](https://github.com/tlwillke/jvector/pull/452)
- Workflow/tag release update [`#450`](https://github.com/tlwillke/jvector/pull/450)
- Workflow/tag release update [`#448`](https://github.com/tlwillke/jvector/pull/448)
- Workflow/tag release update [`#446`](https://github.com/tlwillke/jvector/pull/446)
- Workflow/tag release update [`#444`](https://github.com/tlwillke/jvector/pull/444)
- Workflow/tag release update [`#442`](https://github.com/tlwillke/jvector/pull/442)
- Workflow/tag release update [`#440`](https://github.com/tlwillke/jvector/pull/440)
- Fixes for GHA tag-release workflow [`#438`](https://github.com/tlwillke/jvector/pull/438)
- Fix minor bug in getNodes. [`#434`](https://github.com/tlwillke/jvector/pull/434)
- Fix/refactor NodeScoreIterator, BoundedLongHeap, and GrowableLongHeap bulk addition implementations [`#433`](https://github.com/tlwillke/jvector/pull/433)
- Remove extra prefix of v from tag version [`#432`](https://github.com/tlwillke/jvector/pull/432)
- Update only the root level pom.xml as part of the GHA workflow [`#431`](https://github.com/tlwillke/jvector/pull/431)
- New GHA workflow to create new tag and update changelog [`#428`](https://github.com/tlwillke/jvector/pull/428)
- bugfix for 429 - eliminate maven-resources-plugin warning [`#430`](https://github.com/tlwillke/jvector/pull/430)
- Update test resume [`#422`](https://github.com/tlwillke/jvector/pull/422)
- Fix calls to deprecated GraphIndex.size() [`#426`](https://github.com/tlwillke/jvector/pull/426)
- Fix NPE in GraphIndexBuilder.load [`#425`](https://github.com/tlwillke/jvector/pull/425)
- Reduce the number of vector allocations in BuildScoreProvider.pqBuilderScoreProvider [`#419`](https://github.com/tlwillke/jvector/pull/419)
- Improve the computation of accuracy [`#408`](https://github.com/tlwillke/jvector/pull/408)
- Merge latest commits from hnsw-3 [`#423`](https://github.com/tlwillke/jvector/pull/423)
- Fix native implementations of PQ assembleAndSum and pqDecodedCosineSimilarity [`#420`](https://github.com/tlwillke/jvector/pull/420)
- Fix FusedADC.writeInline [`#417`](https://github.com/tlwillke/jvector/pull/417)
- Implement NodeQueue#pushAll and AbstractLongHeap#addAll [`#415`](https://github.com/tlwillke/jvector/pull/415)
- Count expanded nodes [`#406`](https://github.com/tlwillke/jvector/pull/406)
- Search pruning & fix the reported number of visited nodes [`#405`](https://github.com/tlwillke/jvector/pull/405)
- Fix flaky tests and eliminate console output [`#404`](https://github.com/tlwillke/jvector/pull/404)
- Remove query-time usage of ByteSequence::slice to reduce object allocations [`#403`](https://github.com/tlwillke/jvector/pull/403)
- add index construction benchmark [`#398`](https://github.com/tlwillke/jvector/pull/398)
- Add jmh benchmarks [`#396`](https://github.com/tlwillke/jvector/pull/396)
- Fix MutableBQVectors parameterization. Add basic test coverage. [`#395`](https://github.com/tlwillke/jvector/pull/395)
- make examples use index view [`#392`](https://github.com/tlwillke/jvector/pull/392)
- Update Test2DThreshold to control for averages instead of worst-case statistics [`#391`](https://github.com/tlwillke/jvector/pull/391)
- Change variable names to improve readability [`#388`](https://github.com/tlwillke/jvector/pull/388)
- Fix NVQ distance computations in Native provider [`#389`](https://github.com/tlwillke/jvector/pull/389)
- Improved use ScoreTracker to avoid wasteful searching for very large k [`#387`](https://github.com/tlwillke/jvector/pull/387)
- Use ScoreTracker to avoid wasteful searching for very large k [`#384`](https://github.com/tlwillke/jvector/pull/384)
- Fix CI on Windows due to missing posix_madvise support [`#383`](https://github.com/tlwillke/jvector/pull/383)
- add MADV_RANDOM [`#382`](https://github.com/tlwillke/jvector/pull/382)
- Make ravv usage thread-safe [`#381`](https://github.com/tlwillke/jvector/pull/381)
- Non-uniform vector quantization [`#374`](https://github.com/tlwillke/jvector/pull/374)
- Hand-unroll the SIMD dot product loop [`#380`](https://github.com/tlwillke/jvector/pull/380)
- Fix regression in assembleAndSum PQ decoder performance [`#379`](https://github.com/tlwillke/jvector/pull/379)
- Store compressed vectors in dense ByteSequence for PQVectors [`#370`](https://github.com/tlwillke/jvector/pull/370)
- Reenable SimdOps.assembleAndSum; implement Panama/Native equivalent for CosineDecoder acceleration [`#368`](https://github.com/tlwillke/jvector/pull/368)
- Use fma in SimdOps.cosineSimilarity sum vector [`#363`](https://github.com/tlwillke/jvector/pull/363)
- Improve performance of reconnectOrphanedNodes [`#359`](https://github.com/tlwillke/jvector/pull/359)
- Use float in cosine metric final calculation in default vectorization provider [`#358`](https://github.com/tlwillke/jvector/pull/358)
- approximateMediod returns a random node when the graph is too disconnected to search for the centroid [`#356`](https://github.com/tlwillke/jvector/pull/356)
- Remove check for VBMI on CPU. With Fused ADC using shorts rather than bytes, we no longer need vpermi2b. [`#352`](https://github.com/tlwillke/jvector/pull/352)
- Set IdentityMapper maxOrdinal correctly in Grid/SiftSmall. [`#351`](https://github.com/tlwillke/jvector/pull/351)
- add support for non-sequential remapped ordinals [`#349`](https://github.com/tlwillke/jvector/pull/349)
- cache reranked scores [`#341`](https://github.com/tlwillke/jvector/pull/341)
- extract RandomAccessWriter interface from BRAW [`#340`](https://github.com/tlwillke/jvector/pull/340)
- Clear scratch structures if search terminates exceptionally [`#337`](https://github.com/tlwillke/jvector/pull/337)
- Reduce tendency of reconnectOrphanedNodes to leave orphaned nodes [`#335`](https://github.com/tlwillke/jvector/pull/335)
- Ecapsulate NodeArray internals [`#328`](https://github.com/tlwillke/jvector/pull/328)
- Remove on-disk reranking [`#327`](https://github.com/tlwillke/jvector/pull/327)
- standardize ReaderSupplier implementations as inner classes of their respective RandomAccessReaders, and add a Supplier for SimpleReader [`#323`](https://github.com/tlwillke/jvector/pull/323)
- Fix InlineVectorValues.size/LvqVectorValues.size [`#320`](https://github.com/tlwillke/jvector/pull/320)
- Fix writing jvector2-compatible indexes incrementally [`#313`](https://github.com/tlwillke/jvector/pull/313)
- OrdinalMapper [`#299`](https://github.com/tlwillke/jvector/pull/299)
- Add a memory-mapped RandomAccessReader using MemorySegment api [`#296`](https://github.com/tlwillke/jvector/pull/296)
- tweaks to make life easier for upgraders [`#290`](https://github.com/tlwillke/jvector/pull/290)
- remove (broken) concurrency support from removeDeletedNodes [`#273`](https://github.com/tlwillke/jvector/pull/273)
- Reduce allocation by pooling GraphSearcher objects [`#270`](https://github.com/tlwillke/jvector/pull/270)
- track visited nodes using IntHashSet instead of different BitSets [`#269`](https://github.com/tlwillke/jvector/pull/269)
- make Test2DThreshold less fragile [`#266`](https://github.com/tlwillke/jvector/pull/266)
- Generify new abstracted ODGI, such that the caching hierarchy doesn't require casting back to view/cachednode types. Fix any leakage of return types outside of visibility scope. [`#262`](https://github.com/tlwillke/jvector/pull/262)
- Support building indexes using compressed vectors [`#244`](https://github.com/tlwillke/jvector/pull/244)
- Enable JDK 22 CI [`#258`](https://github.com/tlwillke/jvector/pull/258)
- Use on-heap MemorySegments for native vectors/sequences [`#246`](https://github.com/tlwillke/jvector/pull/246)
- Merge 3.0-alpha [`#256`](https://github.com/tlwillke/jvector/pull/256)
- Replace NormalDistributionTracker with TwoPhaseTracker [`#247`](https://github.com/tlwillke/jvector/pull/247)
- Replace NormalDistributionTracker with TwoPhaseTracker [`#247`](https://github.com/tlwillke/jvector/pull/247)
- Anisotropic PQ [`#201`](https://github.com/tlwillke/jvector/pull/201)
- add a diverseBefore marker to avoid recomputing diversity that hasn't changed [`#242`](https://github.com/tlwillke/jvector/pull/242)
- Cleanup for 3.0 release [`#182`](https://github.com/tlwillke/jvector/pull/182)
- Release 2.0.5 [`#171`](https://github.com/tlwillke/jvector/pull/171)
- Remove ThreadPooling self reference in Pooled object to prevent memory leak [`#169`](https://github.com/tlwillke/jvector/pull/169)
- PhysicalCoreExecutor can exit gracefully; CachingGraphIndex's cacheDistance can be customized [`#160`](https://github.com/tlwillke/jvector/pull/160)
- Add optional FJP args for indexing and quantization [`#162`](https://github.com/tlwillke/jvector/pull/162)
- Fix some bugs [`#156`](https://github.com/tlwillke/jvector/pull/156)
- Use fma in SIMD Euclidean/cosine [`#153`](https://github.com/tlwillke/jvector/pull/153)
- Fix usage of null acceptOrds in SiftSmall example [`#152`](https://github.com/tlwillke/jvector/pull/152)
- vectorsEncountered not always in sync with resultQueue, causing NPE when breaking out of loop due to threshold probability [`#150`](https://github.com/tlwillke/jvector/pull/150)
- Run verify phase in CI (which includes license checks) [`#149`](https://github.com/tlwillke/jvector/pull/149)
- add upgrade guide [`#147`](https://github.com/tlwillke/jvector/pull/147)
- Split LongHeap into Growable and Bounded flavors [`#146`](https://github.com/tlwillke/jvector/pull/146)
- Release 2.0.1 [`#144`](https://github.com/tlwillke/jvector/pull/144)
- add getOriginalSize and getCompressedSize to CompressedVectors interface [`#143`](https://github.com/tlwillke/jvector/pull/143)
- Cherry-pick various bench improvements from PR #76. [`#133`](https://github.com/tlwillke/jvector/pull/133)
- Fix running single test using Maven commandline [`#141`](https://github.com/tlwillke/jvector/pull/141)
- Reconnect orphaned nodes in cleanup() [`#138`](https://github.com/tlwillke/jvector/pull/138)
- Add binary quantization [`#135`](https://github.com/tlwillke/jvector/pull/135)
- Updated downloadhelper [`#134`](https://github.com/tlwillke/jvector/pull/134)
- downloads wikipedia fvec files for 100k, switched to squad based query vectors [`#130`](https://github.com/tlwillke/jvector/pull/130)
- Addresses issue #36 by adding license header checks. Added headers on… [`#129`](https://github.com/tlwillke/jvector/pull/129)
- Ipcexample [`#127`](https://github.com/tlwillke/jvector/pull/127)
- Deletes [`#117`](https://github.com/tlwillke/jvector/pull/117)
- CI improvement [`#131`](https://github.com/tlwillke/jvector/pull/131)
- Adds DenseIntMap for building graph with much less contention. back to zero dependency [`#128`](https://github.com/tlwillke/jvector/pull/128)
- fix mergeNeighbors to not add duplicate nodes, and fix test to check for duplicates [`#119`](https://github.com/tlwillke/jvector/pull/119)
- Mt index build fixes [`#113`](https://github.com/tlwillke/jvector/pull/113)
- Fork test VM per core [`#111`](https://github.com/tlwillke/jvector/pull/111)
- Add improved test coverage for on-disk graph caching [`#109`](https://github.com/tlwillke/jvector/pull/109)
- Fix SimpleMappedReader to respect offset [`#106`](https://github.com/tlwillke/jvector/pull/106)
- KMeansPlusPlusClusterer optimizations [`#100`](https://github.com/tlwillke/jvector/pull/100)
- Add simd approach for summing the cached PQ products of each encoded vector [`#104`](https://github.com/tlwillke/jvector/pull/104)
- README tweaks [`#101`](https://github.com/tlwillke/jvector/pull/101)
- Remove triangle inequality from k means plus plus [`#98`](https://github.com/tlwillke/jvector/pull/98)
- Clean up all build warnings related to multimodule versioning. [`#97`](https://github.com/tlwillke/jvector/pull/97)
- Fragment cache [`#94`](https://github.com/tlwillke/jvector/pull/94)
- wikipedia datasets in readme [`#95`](https://github.com/tlwillke/jvector/pull/95)
- Add decodedCosine fast path [`#91`](https://github.com/tlwillke/jvector/pull/91)
- Implement optimized decoded square distance [`#89`](https://github.com/tlwillke/jvector/pull/89)
- Fix code coverage in IntelliJ [`#88`](https://github.com/tlwillke/jvector/pull/88)
- Fix recall regression for centered PQ with non-dot product metrics [`#84`](https://github.com/tlwillke/jvector/pull/84)
- Refactor tests into jvector-tests module. Set up configurations to be able to run tests with JDK11 features and JDK20 features. [`#75`](https://github.com/tlwillke/jvector/pull/75)
- move sharing from annotation to method; use that in PQ [`#83`](https://github.com/tlwillke/jvector/pull/83)
- Minor documentation updates [`#77`](https://github.com/tlwillke/jvector/pull/77)
- Change package from com.github.jbellis to io.github.jbellis [`#71`](https://github.com/tlwillke/jvector/pull/71)
- Release 0.9.0 [`#69`](https://github.com/tlwillke/jvector/pull/69)
- Build rework for release. Split examples out into separate project. [`#68`](https://github.com/tlwillke/jvector/pull/68)
- Build updates to prep for release [`#66`](https://github.com/tlwillke/jvector/pull/66)
- Javadoc fixes and produce javadoc as part of the build [`#64`](https://github.com/tlwillke/jvector/pull/64)
- Revert changes to hdf5 path in Bench, set up mvn exec to use parent basedir [`#65`](https://github.com/tlwillke/jvector/pull/65)
- Migrate to Maven multi-module project and produce multirelease jar [`#61`](https://github.com/tlwillke/jvector/pull/61)
- Swap Maven jdk11 build to use -release 11, which also checks for too-new APIs [`#59`](https://github.com/tlwillke/jvector/pull/59)
- Remove MacOS runner [`#58`](https://github.com/tlwillke/jvector/pull/58)
- Fix Windows tests [`#57`](https://github.com/tlwillke/jvector/pull/57)
- Switch to maven profiles, add gh workflow for tests and add package f… [`#55`](https://github.com/tlwillke/jvector/pull/55)
- Switch to ThreadLocal cached searcher in GraphIndexBuilder [`#56`](https://github.com/tlwillke/jvector/pull/56)
- Fix npe [`#53`](https://github.com/tlwillke/jvector/pull/53)
- Track numVisited when performing graph searches [`#51`](https://github.com/tlwillke/jvector/pull/51)
- Replace NBHM with CHM, remove NBHM dependency [`#49`](https://github.com/tlwillke/jvector/pull/49)
- Perf improvements [`#47`](https://github.com/tlwillke/jvector/pull/47)
- JVECTOR-31 [`#46`](https://github.com/tlwillke/jvector/pull/46)
- JVECTOR-8 [`#42`](https://github.com/tlwillke/jvector/pull/42)
- Fix offset math in testing MappedRandomAccessReader readFloatsAt [`#44`](https://github.com/tlwillke/jvector/pull/44)
- Issue 38 multiple jdk builds [`#40`](https://github.com/tlwillke/jvector/pull/40)
- JVECTOR-20 [`#41`](https://github.com/tlwillke/jvector/pull/41)
- Faster on-disk index flush in Bench [`#37`](https://github.com/tlwillke/jvector/pull/37)
- JVector 24: DiskANN [`#28`](https://github.com/tlwillke/jvector/pull/28)
- Integrate PQ to recall Bench [`#14`](https://github.com/tlwillke/jvector/pull/14)
- Add PanamaVectorSupport for Java 20+ [`#16`](https://github.com/tlwillke/jvector/pull/16)
- Added details for running both example classes via maven exec plugin [`#18`](https://github.com/tlwillke/jvector/pull/18)
- Integrate recall benchmark functionality [`#10`](https://github.com/tlwillke/jvector/pull/10)
- Add mvn wrapper [`#7`](https://github.com/tlwillke/jvector/pull/7)
- Initial clean up of pom.xml for packaging and release [`#5`](https://github.com/tlwillke/jvector/pull/5)
- Use float in cosine metric final calculation in default vectorization provider (#358) [`#357`](https://github.com/jbellis/jvector/issues/357)
- only compute aMagnitude for cosines once, since it is independent of the query vector [`#220`](https://github.com/tlwillke/jvector/issues/220)
- only compute aMagnitude for cosines once, since it is independent of the query vector [`#220`](https://github.com/tlwillke/jvector/issues/220)
- replace optimistic locking with pessimistic to prevent size() inconsistencies [`#218`](https://github.com/tlwillke/jvector/issues/218)
- Fix GraphIndexBuilder.reconnectOrphanedNodes [`#214`](https://github.com/tlwillke/jvector/issues/214)
- Improve GraphIndexBuilder#cleanup doc for concurrent searches [`#188`](https://github.com/tlwillke/jvector/issues/188)
- Make GraphIndexBuilder.markNodeDeleted thread-safe [`#174`](https://github.com/tlwillke/jvector/issues/174)
- rename BFS_DISTANCE to CACHE_distance; fixes #96 [`#96`](https://github.com/tlwillke/jvector/issues/96)
- make View extend AutoCloseable.  Fixes #78 [`#78`](https://github.com/tlwillke/jvector/issues/78)
- update PQ to take RAVV.  fixes #74 [`#74`](https://github.com/tlwillke/jvector/issues/74)
- fix dotProduct-with-offsets in Default provider.  fixes #60 [`#60`](https://github.com/tlwillke/jvector/issues/60)
- apply alpha-diversity incrementally in enforceMaxConnLimit, like we do in insertDiverse.  This significantly improves the quality of connections retained, vs just starting at the back with max alpha.  Closes #33 [`#33`](https://github.com/tlwillke/jvector/issues/33)
- Created initial README.md [`#6`](https://github.com/tlwillke/jvector/issues/6)
- import hnsw + pq [`9f5b9c6`](https://github.com/tlwillke/jvector/commit/9f5b9c6a4f4f8d8bc0ba441246dfe265bfde4cc1)
- Squashed merge of PR #402: Add hierarchical structure to the graph index [`00a13a8`](https://github.com/tlwillke/jvector/commit/00a13a8a793009ffd13bb61374725653e0c50b87)
- Introduce OnDiskGraphIndex feature abstraction to embed additional content in graph (e.g., fused ADC or LVQ). Add the ability to incrementally write inline content to a graph index. Caching index only implements caching of edges. [`09f6850`](https://github.com/tlwillke/jvector/commit/09f68507b495a0dfe7269e85da74943e509f804e)
